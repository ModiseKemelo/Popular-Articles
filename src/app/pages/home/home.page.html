<div class="page-wrapper">
  <div class="header-wrapper">
    <ion-header class="ion-no-border">
      <ion-toolbar style="--background: rgb(61, 197, 243);">
        <ion-title color="light" class="ion-text-center">My Most Popular Articles App
        </ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-list-header>
      <ion-label class="list-heading" color="light"> {{articlesList.length}} Articles Found

      </ion-label>
      <ion-icon style="margin-right: 16px;" size="large" name="ellipsis-vertical-sharp" color="light"
        (click)="showPopoUp($event)">
      </ion-icon>
    </ion-list-header>


    <ion-card class="searchbar-wrapper">
      <ion-searchbar style="margin-top: 0px;" mode="ios" placeholder="Search For Articles" color="light"
        class="searchbar-input" [formControl]="searchControl" (ionChange)="onSearchInput()"></ion-searchbar>

    </ion-card>

  </div>
  <div class="ion-padding content-wrapper">
    <ion-content style="padding-top: 0px; ">

      <ion-refresher slot="fixed" color="light" (ionRefresh)="doRefresh($event)" style="z-index: 999;">
        <ion-refresher-content pullingIcon="chevron-down-circle-outline" pullingText="Pull to refresh"
          refreshingSpinner="circles" refreshingText="Fetching Articles...">
        </ion-refresher-content>
      </ion-refresher>

      <ion-list>
        <div *ngIf="!data">
          <ion-list>
            <ion-item>
              <ion-label>
                <h3>
                  <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
                </h3>
                <p>
                  <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
                </p>
                <p>
                  <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
                </p>
              </ion-label>
            </ion-item>
            <ion-item>
              <ion-label>
                <h3>
                  <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
                </h3>
                <p>
                  <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
                </p>
                <p>
                  <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
                </p>
              </ion-label>
            </ion-item>
            <ion-item>
              <ion-label>
                <h3>
                  <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
                </h3>
                <p>
                  <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
                </p>
                <p>
                  <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
                </p>
              </ion-label>
            </ion-item>
            <ion-item>
              <ion-label>
                <h3>
                  <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
                </h3>
                <p>
                  <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
                </p>
                <p>
                  <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
                </p>
              </ion-label>
            </ion-item>

            <ion-item>
              <ion-label>
                <h3>
                  <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
                </h3>
                <p>
                  <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
                </p>
                <p>
                  <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
                </p>
              </ion-label>
            </ion-item>

            <ion-item>
              <ion-label>
                <h3>
                  <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
                </h3>
                <p>
                  <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
                </p>
                <p>
                  <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
                </p>
              </ion-label>
            </ion-item>
          </ion-list>
        </div>

        <div *ngIf="data">

          <ion-list>
            <ion-list-header>
              Article in the last {{articlePeriod}} day(s)
            </ion-list-header>

            <ion-item *ngFor="let article of articlesList" (click)="viewDeatil(article)">
              <div *ngFor="let image of article.media">
                <div *ngFor="let metadata of image['media-metadata']; let first = first">
                  <div *ngIf="first" class="avatar-img">
                    <img class="img-place" *ngIf="first" src={{metadata.url}} alt="">
                  </div>
                </div>
              </div>
              <ion-label>
                <h2 class="title-txt">{{article.title}}</h2>
                <p class="by-line">{{article.byline}}</p>
                <div>

                  <p class="pub-date"><span>
                      <ion-icon name="calendar" color="primary"></ion-icon>
                    </span>{{article.published_date}}</p>
                </div>

              </ion-label>
            </ion-item>
          </ion-list>
          <h5 *ngIf="articlesList.length === 0" class="centre-text">NO ARTICLES FOUND</h5>
        </div>

      </ion-list>
      <ion-footer>
        <ion-toolbar>
          <ion-title class="copyright-txt">{{articlesData?.copyright}}</ion-title>
        </ion-toolbar>
      </ion-footer>
    </ion-content>
  </div>
</div>
